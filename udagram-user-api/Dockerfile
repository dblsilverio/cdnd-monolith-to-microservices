FROM node:13

ARG POSTGRES_USERNAME
ARG POSTGRES_PASSWORD
ARG POSTGRES_DB
ARG POSTGRES_HOST
ARG JWT_SECRET

ENV POSTGRES_USERNAME=$POSTGRES_USERNAME
ENV POSTGRES_PASSWORD=$POSTGRES_PASSWORD
ENV POSTGRES_DB=$POSTGRES_DB
ENV POSTGRES_HOST=$POSTGRES_HOST
ENV URL=http://localhost:8100
ENV JWT_SECRET=$JWT_SECRET

# App directory
WORKDIR /app/

# Copy app source
COPY www/ ./

# Install dependencies
RUN npm install

EXPOSE 8080

# Start app
CMD [ "node", "server.js" ]